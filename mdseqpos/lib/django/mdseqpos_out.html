<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
   "http://www.w3.org/TR/html4/frameset.dtd">
<html>
<head>
   <title>Cistrome Motifs</title>
   <script type="text/javascript" src="mdseqpos_out.js"></script>
   <script>
//Given a json representation of the motif tree, it retuns a 
//tree of (javascript) Motif objects

/* THIS FN is OBSOLETE B/C WE HAVE REMOVED THE TREE-NAV WINDOW;
   NO NEED FOR A MOTIFTREE DATA REPRESENTATION ANYMORE.  
function parseMTree(node, parent) {
    if (node == null) {
        return null;
     }
     //TEMPORARILY SET consensus to id
     node.node.consensus = node.node.id;
     var tmp = new Motif(node.node);
     var children = [];
     for (var i = 0; i < node.children.length; i++) {
         var child = parseMTree(node.children[i], tmp);
	 children.push(child);
     }
     var treeNode = {'node': tmp, 'children':children, 'parent': parent};
     tmp.setTreeNode(treeNode);
     return treeNode;
}
*/

/**
 * Function: flattenMTree
 * Given a JSON tree representation of the motif tree, this function flattens
 * the tree and creates a list of motifs
 **/
function flattenMTree(node, list) {
    if (node != null && node.node != null) {
       //This is a DF traversal
       list.push(new Motif(node.node));
       for (var i = 0; i < node.children.length; i++) {
          list = flattenMTree(node.children[i], list);
       }
    }
    return list;
}

{% autoescape off %}
//this needs to be converted--i.e. the nodes need to be made into Motif objs.
var mtree = {{ tree_to_json }}
{% endautoescape %} 

//var motifTree = parseMTree(mtree, null); OBSOLETE
var motifList = flattenMTree(mtree, []);
motifModel = new MotifModel(motifList);
   </script>
</head>
<frameset rows="50%, 50%">
  <frame src="focus_frame.html" name="focus_frame">
  <frame src="table_frame.html" name="table_frame">
  <!--<frame src="tree_frame.html" name="tree_frame">-->
  <noframes>
    <h1>Please use a frames compatible browser when viewing this output</h1>
  </noframes>
</frameset>
</html>
